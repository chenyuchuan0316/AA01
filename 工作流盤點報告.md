# 工作流盤點報告

## .github/workflows/ci.yml（CI）

- **on**：`pull_request`（opened、synchronize、reopened、ready_for_review）、`workflow_dispatch`
- **lint**：✅ `npm run lint`
- **test**：✅ `npm test -- --runInBand`
- **e2e**：✅ `npm run e2e:ui`、條件式遠端 `npm run e2e:remote`
- **a11y**：✅ `npm run test:a11y:pa11y`
- **health**：✅ `node scripts/health-check.mjs`（可繼續失敗）
- **備註**：單一 PR CI 串連 Install→Lint→Jest→Playwright→Health→Pa11y→Remote（需同時具備 GAS URL 與 auth）。

## .github/workflows/ci-preview.yml

- **on**：`workflow_dispatch`
- **lint**：❌
- **test**：❌
- **e2e**：✅ `npm run e2e:ui`、條件式 `npm run e2e:remote`
- **a11y**：❌
- **health**：✅ `node scripts/health-check.mjs`
- **備註**：建立測試版 Deployment 後跑本地/遠端 UI 冒煙並輸出報告。

## .github/workflows/codex-audit.yml

- **on**：`issue_comment`（含 `/audit` 指令）、`workflow_dispatch`
- **lint**：✅ `npm run lint`
- **test**：✅ `npm run test -- --coverage`
- **e2e**：✅ `npm run e2e`（失敗不終止流程）
- **a11y**：❌
- **health**：❌
- **備註**：第二階段額外執行 `npx jscpd`、`npx madge`、`npx knip` 產出稽核 artifacts。

## .github/workflows/gas-deploy.yml

- **on**：`workflow_dispatch`
- **lint**：❌
- **test**：✅ `npm test --if-present`
- **e2e**：✅ `npm run e2e:ui`、條件式 `npm run e2e:remote`
- **a11y**：❌
- **health**：✅ `node scripts/health-check.mjs`
- **備註**：分成測試與部署階段，最後使用 `clasp deploy` 更新 PROD 並驗證版本。

## .github/workflows/npm-auto-upgrade.yml

- **on**：`schedule`（每週一 01:30 UTC）、`workflow_dispatch`
- **lint**：❌
- **test**：⚠️ 僅手動觸發時執行 `npm test`
- **e2e**：⚠️ 僅手動觸發時執行 `npm run e2e`
- **a11y**：❌
- **health**：❌
- **備註**：依 `strategy`（safe/major）調整套件並自動建立 PR，無條件健康檢查。

## .github/workflows/npm-outdated.yml

- **on**：`schedule`（每週一 01:00 UTC）、`workflow_dispatch`
- **lint**：❌
- **test**：❌
- **e2e**：⚠️ 手動且 `run_e2e=true` 時執行 `npm run e2e:ui`
- **a11y**：❌
- **health**：❌
- **備註**：核心任務為輸出 `outdated.json` 與 Summary 報告。

## .github/workflows/predeploy.yml

- **on**：`push`（main）、`workflow_dispatch`
- **lint**：❌
- **test**：❌
- **e2e**：❌
- **a11y**：❌
- **health**：❌
- **備註**：主要處理 `clasp version` 與 `clasp deploy`，確保 PROD Deployment 指向最新版本。

## .github/workflows/\_tmpl_clasp.json

- **on**：❌（僅模板檔案）
- **lint/test/e2e/a11y/health**：不適用
- **備註**：作為自訂 Workflow 樣板，不由 GitHub Actions 直接執行。

## .github/workflows/gas-deploy.yml.bak-20250929-054713

- **on**：❌（歷史備份）
- **lint/test/e2e/a11y/health**：不適用
- **備註**：保留舊版部署流程做為參考。

## .github/workflows/新增 文字文件.txt

- **on**：❌（純備忘）
- **lint/test/e2e/a11y/health**：不適用
- **備註**：紀錄手動操作步驟，非自動化流程。
